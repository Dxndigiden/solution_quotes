{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <style>
        body {padding: 2rem;}
        .quote-box {border:1px solid #ccc; padding:1.5rem; border-radius:0.5rem;}
        .buttons {margin-top:1rem;}
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container">
    <h1>–°–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</h1>

    {% if quote %}
        <div class="quote-box">
            <p style="font-size:1.5rem;">"{{ quote.text }}"</p>
            <p><em>‚Äî {{ quote.source }}</em></p>
            <p>–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤: <span id="views">{{ quote.views }}</span></p>
            <div class="buttons">
                <button id="like-btn" class="btn btn-success">üëç <span id="likes">{{ quote.likes }}</span></button>
                <button id="dislike-btn" class="btn btn-danger">üëé <span id="dislikes">{{ quote.dislikes }}</span></button>
            </div>
        </div>

        <script>
            function ajaxVote(url, counterId) {
                $.ajax({
                    url: url,
                    method: "POST",
                    headers: {'X-CSRFToken': '{{ csrf_token }}'},
                    success: function(data) {
                        $('#' + counterId).text(data[counterId]);
                    }
                });
            }

            $('#like-btn').click(function() {
                ajaxVote("{% url 'quotes:like_quote' quote.id %}", "likes");
            });

            $('#dislike-btn').click(function() {
                ajaxVote("{% url 'quotes:dislike_quote' quote.id %}", "dislikes");
            });
        </script>
    {% else %}
        <p>–¶–∏—Ç–∞—Ç –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endif %}

    <p><a href="{% url 'quotes:top_quotes' %}">–¢–æ–ø-10 —Ü–∏—Ç–∞—Ç</a></p>
    <p><a href="{% url 'quotes:random_quote' %}">–î—Ä—É–≥–∞—è —Å–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ç–∞—Ç–∞</a></p>
</div>
</body>
</html>
